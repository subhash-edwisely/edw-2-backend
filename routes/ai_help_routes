from flask import Blueprint, request, jsonify
from services.ai_help_service import create_ai_help

ai_help_bp = Blueprint("ai_help", __name__, url_prefix="/api/ai_help")

@ai_help_bp.route("/create", methods=["POST"])
def create_help():
    data = request.get_json()
    try:
        ai_help = create_ai_help(
            user_id=data["userId"],
            problem_id=data["problemId"],
            help_type=data["helpType"],
            xp_cost=data["xpCost"],
            prompt=data["prompt"],
            response=data["response"]
        )
        return jsonify({
            "success": True,
            "aiHelpId": ai_help.id
        })
    except Exception as e:
        print("Error creating AI help:", e)
        return jsonify({"success": False, "message": str(e)}), 500
